<section id="contact-section" class="w-full py-8 md:py-16">
    <div class="w-full max-w-[2000px] mx-auto px-4">
        <div class="max-w-3xl mx-auto text-center">
            <h1
                id="contact-title"
                class="text-primary-dark dark:text-primary-light font-black text-4xl md:text-5xl mb-6 font-mulish"
            >
                Let's Work Together!
            </h1>
            <p
                class="text-primary-dark dark:text-primary-light font-mulish text-lg leading-relaxed"
            >
                Have an exciting project in mind? Send me an email at <a
                    class="font-bold underline"
                    href="mailto:audywallace00@gmail.com"
                    >audywallace00@gmail.com</a
                >
            </p>
            <div class="w-full flex items-center gap-2 px-[10%] py-2">
                <div class="w-full h-1 bg-primary-dark dark:bg-primary-light">
                </div>
                <span
                    class="text-primary-dark dark:text-primary-light font-mulish text-lg font-bold"
                    >or</span
                >
                <div class="w-full h-1 bg-primary-dark dark:bg-primary-light">
                </div>
            </div>
            <p
                class="text-primary-dark dark:text-primary-light font-mulish text-lg mb-8"
            >
                Drop a message below and I'll get back to you ASAP!
            </p>
        </div>

        <form
            id="contactForm"
            class="max-w-2xl mx-auto space-y-6 p-8 bg-secondary-light dark:bg-secondary-dark backdrop-blur-sm rounded-xl shadow-2xl"
        >
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-2">
                    <label
                        for="name"
                        class="block text-primary-dark dark:text-primary-light font-mulish font-medium"
                    >
                        Name
                    </label>
                    <input
                        type="text"
                        id="name"
                        name="name"
                        required
                        class="w-full px-4 py-3 rounded-lg bg-white dark:bg-white/10 border border-gray-300 dark:border-gray-700 text-primary-dark dark:text-primary-light focus:ring-2 focus:ring-primary-blue focus:border-transparent transition duration-200 outline-none"
                        placeholder="Your name"
                    />
                </div>
                <div class="space-y-2">
                    <label
                        for="email"
                        class="block text-primary-dark dark:text-primary-light font-mulish font-medium"
                    >
                        Email
                    </label>
                    <input
                        type="email"
                        id="email"
                        name="email"
                        required
                        class="w-full px-4 py-3 rounded-lg bg-white dark:bg-white/10 border border-gray-300 dark:border-gray-700 text-primary-dark dark:text-primary-light focus:ring-2 focus:ring-primary-blue focus:border-transparent transition duration-200 outline-none"
                        placeholder="your.email@example.com"
                    />
                </div>
            </div>

            <div class="space-y-2">
                <label
                    for="subject"
                    class="block text-primary-dark dark:text-primary-light font-mulish font-medium"
                >
                    Subject
                </label>
                <input
                    type="text"
                    id="subject"
                    name="subject"
                    required
                    class="w-full px-4 py-3 rounded-lg bg-white dark:bg-white/10 border border-gray-300 dark:border-gray-700 text-primary-dark dark:text-primary-light focus:ring-2 focus:ring-primary-blue focus:border-transparent transition duration-200 outline-none"
                    placeholder="What's this about?"
                />
            </div>

            <div class="space-y-2">
                <label
                    for="message"
                    class="block text-primary-dark dark:text-primary-light font-mulish font-medium"
                >
                    Message
                </label>
                <textarea
                    id="message"
                    name="message"
                    rows="6"
                    required
                    class="w-full px-4 py-3 rounded-lg bg-white dark:bg-white/10 border border-gray-300 dark:border-gray-700 text-primary-dark dark:text-primary-light focus:ring-2 focus:ring-primary-blue focus:border-transparent transition duration-200 outline-none resize-none"
                    placeholder="Tell me about your project..."></textarea>
            </div>

            <button
                type="submit"
                class="w-full md:w-auto px-8 py-3 bg-primary-blue hover:bg-blue-600 text-white font-mulish font-medium rounded-lg transition duration-200 transform hover:scale-[1.02] focus:ring-2 focus:ring-primary-blue focus:ring-offset-2"
            >
                Send Message
            </button>
        </form>
    </div>
</section>

<style>
    #contact-title {
        position: relative;
        display: inline-block;
        z-index: 1;
    }

    #contact-title::after {
        content: "";
        position: absolute;
        left: 50%;
        top: 70%;
        height: 0.5rem;
        width: 110%;
        background-color: var(--primary-blue);
        box-shadow:
            0 0 5px var(--primary-blue),
            0 0 10px var(--primary-blue),
            0 0 20px var(--primary-blue);
        opacity: 0.8;
        transform: translateX(-50%);
        z-index: -1;
    }

    #contactForm input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active {
        -webkit-box-shadow: 0 0 0px 1000px white inset !important;
        -webkit-text-fill-color: var(--primary-dark) !important;
        transition: background-color 5000s ease-in-out 0s;
    }

    html.dark #contactForm input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active {
        -webkit-box-shadow: 0 0 0px 1000px rgb(255 255 255 / 0) inset !important;
        -webkit-text-fill-color: var(--primary-light) !important;
        transition: background-color 5000s ease-in-out 0s;
    }

    @media (max-width: 402px) {
        #contact-title::after {
            top: 90%;
            width: 75%;
        }
    }
</style>

<script>
    const contactForm = document.getElementById(
        "contactForm",
    ) as HTMLFormElement;
    contactForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const formData = new FormData(contactForm);
        const payload = Object.fromEntries(formData.entries());

        try {
            const response = await fetch("/api/email", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    senderName: payload.name,
                    senderEmail: payload.email,
                    subject: payload.subject,
                    message: payload.message,
                }),
            });
            const data = await response.json();

            console.log(response);

            if (!response.ok) {
                throw new Error(data.message || "An error occurred");
            }
            contactForm.reset();
        } catch (error) {
            console.error(error);
        }
    });
</script>
